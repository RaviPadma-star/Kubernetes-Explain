1. create a new iam user with admin access.. in real time we are not giving admin access save secret access key in local
2. create a workstation called a instance from there we should connect eks cluster means provision of cluster this is for only lab purpose
there is always a prodcution provision cluster
3. eksctl --> means its connect the aws console
4. cmd --> aws --version
 ---aws-cli/1.18.147 Python/2.7.18 Linux/5.10.176-157.645.amzn2.x86_64 botocore/1.18.6
here we getting aws v1 but need is aws 2 version for that search aws cli 2 version

-------------------

curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
unzip awscliv2.zip
sudo ./aws/install

Note
To update your current installation of the AWS CLI, add your existing symlink and installer information to construct the install command with the --update parameter.


$ sudo ./aws/install --bin-dir /usr/local/bin --install-dir /usr/local/aws-cli --update


just logout and login in server to see updated version 2

aws-cli/2.11.13 Python/3.11.3 Linux/5.10.176-157.645.amzn2.x86_64 exe/x86_64.amzn.2 prompt/off


------------------------


---------------------------------

after this we need to install eksctl command

curl --silent --location "https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_$(uname -s)_amd64.tar.gz" | tar xz -C /tmp

sudo mv /tmp/eksctl /usr/local/bin

eksctl version

---------------------------


now we install kubectl commands

curl -O https://s3.us-west-2.amazonaws.com/amazon-eks/1.24.11/2023-03-17/bin/linux/amd64/kubectl

then we should move the folder

curl -O https://s3.us-west-2.amazonaws.com/amazon-eks/1.24.10/2023-01-30/bin/linux/amd64/kubectl
chmod +x kubectl
sudo mv kubectl /usr/local/bin/kubectl


-------------------------------------------------

now we should be auth to aws 

-- aws config

[ec2-user@ip-172-31-86-122 ~]$ aws configure
AWS Access Key ID [****************56XV]:
AWS Secret Access Key [****************a/V1]:
Default region name [us-east-1]:
Default output format [yaml]:


---------------------------------------------------

now we need to  create cluster --> every cluster as a one master node and nodes and master node connected to all the sepcific nodes

---how to create cluster
-- we  need a yaml file

apiVersion: eksctl.io/v1alpha5
kind: ClusterConfig

metadata:
  name: spot-cluster
  region: us-east-1

managedNodeGroups:

# `instanceTypes` defaults to [`m5.large`]
- name: cluster-1
  spot: true
  ssh:
    publicKeyName: Docker-Kubernates

----------------------

how to execte this --> vim eks-config.yaml

then create -- eksctl create cluster --config-file=[file-name].yaml

and to delete cluster -- eksctl delete cluster --config-file=[file-name].yaml


--------------------------------------------------------------------

now we can check in aws eks tool it as created.
